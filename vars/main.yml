---
###############################################################################
# Readarr Role Options
###############################################################################
# Readarr uses generic Servarr installation scripts.
#
# Updates:
# * Branch for new Debian releases.
# * KEEP a separate change log as changes are made.
# * Use bare-metal docs to validate package/process changes.
# * Update role defaults (includes updating defaults, tasks):
#   * Use configuration docs to add new variables.
#   * Use defaults to remove any changed/deprecated variables.
# * Update tests for any changes.
#   * Use BARE VERSION for find and replace to set new version.
# * Standard role validation testing (yamllint, ansible-lint, to-do, no-qa).
# * Tag with OS-APP-ROLE version.
#
# Reference:
# * https://github.com/Servarr/Wiki/blob/master/servarr
# * https://github.com/Readarr/Readarr/releases

# Last time Readarr options were validated against a default configuration.
readarr_role_validate_date: '2025-08-25'
readarr_role_validate_release: 'trixie'
readarr_role_validate_version: 'v0.4.18.2805'
readarr_role_validate_script_release: '3.0.12'
readarr_role_validate_script_date: '2024-04-09'

###############################################################################
# APT Packages
###############################################################################

readarr_role_packages:
  - 'sqlite3'  # Readarr DB.
  - 'gnupg2'  # GPG for certificates.
  - 'ca-certificates'  # Up to date certificates for certificate validation.
  - 'libicu76'  # International Unicode support for .NET.

###############################################################################
# Readarr GitHub Options
###############################################################################
# Reference:
# * https://github.com/Readarr/Readarr/releases/latest

readarr_role_repo_release_owner: 'Readarr'
readarr_role_repo_release_repo: 'Readarr'
readarr_role_repo_extract_dir: '/opt/readarr'
readarr_role_repo_extract_symlink: '/opt/readarr/readarr'
readarr_role_repo_release_specifier: 'v'
readarr_role_repo_release_asset:
  'Readarr.develop.{BARE_VERSION}.linux-core-x64.tar.gz'
readarr_role_repo_extract_migrate_files:
  - 'readarr.db'
  - 'readarr.db-shm'  # Readarr never closes DB's correctly.
  - 'readarr.db-wal'
  - 'cache.db'
  - 'cache.db-shm'  # Readarr never closes DB's correctly.
  - 'cache.db-wal'
  - 'logs.db'
  - 'logs.db-shm'
  - 'logs.db-wal'

###############################################################################
# Default Readarr User/Group
###############################################################################

readarr_role_group:
  name: 'media'
  gid: 5555

readarr_role_user:
  name: 'media'
  group: 'media'
  uid: 5555
  shell: '/usr/sbin/nologin'
  home: '/nonexistent'
  create_home: false
  password: '!'
  password_lock: true
  update_password: 'always'
  expires: -1
  system: true
